<html>

<head>
<!-- saved from url=(0014)about:internet -->
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<base target="_self">
<title> </title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";}
h2
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:Arial;
	font-weight:bold;
	font-style:italic;}
h3
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:Arial;
	font-weight:bold;}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman";}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Times New Roman";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:Tahoma;}
p.Lb1, li.Lb1, div.Lb1
	{margin-top:0in;
	margin-right:5.75pt;
	margin-bottom:3.0pt;
	margin-left:.25in;
	text-indent:-12.0pt;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:Arial;}
span.BulletedList1Char
	{font-family:Arial;}
p.Lp1, li.Lp1, div.Lp1
	{margin-top:0in;
	margin-right:5.75pt;
	margin-bottom:3.0pt;
	margin-left:.25in;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:Arial;}
span.HHyperlink
	{color:blue;
	text-decoration:underline;}
p.Text, li.Text, div.Text
	{margin-top:6.0pt;
	margin-right:0in;
	margin-bottom:2.0pt;
	margin-left:0in;
	line-height:12.0pt;
	font-size:10.0pt;
	font-family:Arial;
	color:black;}
p.Th, li.Th, div.Th
	{margin-top:0in;
	margin-right:5.75pt;
	margin-bottom:3.0pt;
	margin-left:5.75pt;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:Arial;
	font-weight:bold;}
p.Tp, li.Tp, div.Tp
	{margin-top:0in;
	margin-right:5.75pt;
	margin-bottom:3.0pt;
	margin-left:5.75pt;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:10.0pt;
	font-family:Arial;}
p.Tes, li.Tes, div.Tes
	{margin-top:0in;
	margin-right:5.75pt;
	margin-bottom:0in;
	margin-left:5.75pt;
	margin-bottom:.0001pt;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:6.0pt;
	font-family:Arial;}
p.NormalVerdana, li.NormalVerdana, div.NormalVerdana
	{margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	font-size:10.0pt;
	font-family:Verdana;}
@page Section1
	{size:11.0in 11.0in;
	margin:1.0in 1.5in 1.0in 1.5in;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=Section1>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;border-collapse:collapse'>
 <tr style='height:.2in'>
  <td width="31%" rowspan=2 valign=top style='width:31.26%;padding:0in 0in 0in 0in;
  height:.2in'>
  <p class=MsoNormal></p>
  </td>
  <td width="1%" rowspan=2 valign=top style='width:1.58%;padding:0in 0in 0in 0in;
  height:.2in'>
  <p class=MsoNormal></p>
  </td>
  <td width="8%" valign=top style='width:8.1%;background:black;padding:0in 0in 0in 0in;
  height:.2in'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width="59%" style='width:59.08%;background:black;padding:0in 0in 0in 0in;
  height:.2in'>
  <p class=MsoNormal align=right style='text-align:right'><b><span
  style='font-size:7.0pt;font-family:Verdana;color:white'><a
  href="http://support.microsoft.com/"><span style='color:white;text-decoration:
  none'>Links to the Web: Support</span></a> | <a
  href="http://search.microsoft.com/"><span style='color:white;text-decoration:
  none'>Search</span></a> | <a href="http://www.msdn.microsoft.com/"><span
  style='color:white;text-decoration:none'>MSDN</span></a> | <a
  href="http://www.microsoft.com/whdc/devtools/ddk/default.mspx"><span
  style='color:white;text-decoration:none'>Windows Driver Kits</span></a>&nbsp;</span></b></p>
  </td>
 </tr>
 <tr style='height:22.1pt'>
  <td width="8%" valign=top style='width:8.1%;padding:0in 0in 0in 0in;
  height:22.1pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td width="59%" valign=top style='width:59.08%;padding:0in 0in 0in 0in;
  height:22.1pt'>
  <p class=MsoNormal align=right style='text-align:right'></p>
  </td>
 </tr>
 <tr style='height:.2in'>
  <td width="100%" colspan=4 style='width:100.0%;background:#336699;padding:
  0in 0in 0in 0in;height:.2in'>
  <p class=MsoNormal><b><span style='font-size:7.0pt;font-family:Verdana;
  color:white'></span></a>&nbsp;</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<!---------------------------Title----------------------------------->
<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>
<B><FONT FACE="Verdana" SIZE=+2>Microsoft Windows Driver Kit
Release Notes</FONT></B>

</UL>

<!----------------------Table of Contents---------------------------->
<P><B><FONT face="Verdana, Arial, Helvetica" size="+1">Table of Contents</FONT></B>
<UL>


<b><FONT face="Verdana, Arial, Helvetica" size="2">WDK Development Installation
News</FONT></b><br>
<ul>
<A href="relnote.htm#devinstall"><FONT face="Verdana, Arial, Helvetica" size="2">Development Install Issues</FONT><br></a>
<A href="relnote.htm#environments">WDK Build Environment<br></a>
<A href="relnote.htm#versioning"><FONT face="Verdana, Arial, Helvetica" size="2">Header Versioning</FONT><br></a>
<A href="relnote.htm#signing"><FONT face="Verdana, Arial, Helvetica" size="2">Driver Signing</FONT><br></a>
<A href="relnote.htm#samples"><FONT face="Verdana, Arial, Helvetica" size="2">Building WDK Samples</FONT><br></a>
<A href="relnote.htm#compiling"><FONT face="Verdana, Arial, Helvetica" size="2">Compiling and Linking</FONT><br></a>
<A href="relnote.htm#umdf"><FONT face="Verdana, Arial, Helvetica" size="2">UMDF</FONT><br></a>
<A href="relnote.htm#kmdf"><FONT face="Verdana, Arial, Helvetica" size="2">KMDF</FONT><br></a>
<A href="relnote.htm#printsamp"><FONT face="Verdana, Arial, Helvetica" size="2">Print Samples</FONT><br></a>
<A href="relnote.htm#tools"><FONT face="Verdana, Arial, Helvetica" size="2">Tools</FONT><br></a>
<A href="relnote.htm#dsf"><FONT face="Verdana, Arial, Helvetica" size="2">Device Simulation Framework (DSF)</FONT><br></a>
<A href="relnote.htm#miscellaneous"><FONT face="Verdana, Arial, Helvetica" size="2">Miscellaneous</FONT><br></a>
</ul>

<br>

<b><FONT face="Verdana, Arial, Helvetica" size="2">WDK Driver Test Manager News</FONT></b><br>
<ul>
<A href="relnote.htm#INSTALL"><FONT face="Verdana, Arial, Helvetica" size="2">
Installing Driver Test Manager</FONT><br></a>
<A href="relnote.htm#security"><FONT face="Verdana, Arial, Helvetica" size="2">
		Security Issues</FONT><br></a>
<A href="relnote.htm#scenarios"><FONT face="Verdana, Arial, Helvetica" size="2">
		Tested Scenarios - General</FONT><br></a>

<A href="relnote.htm#pnpd"><FONT face="Verdana, Arial, Helvetica" size="2">Tested Scenarios - PnPD</FONT><br></a>
<A href="relnote.htm#storage"><FONT face="Verdana, Arial, Helvetica" size="2">Tested Scenarios - Storage</FONT><br></a>
<A href="relnote.htm#print"><FONT face="Verdana, Arial, Helvetica" size="2">Tested Scenarios - Print</FONT><br></a>
<A href="relnote.htm#portable"><FONT face="Verdana, Arial, Helvetica" size="2">Tested Scenarios - Portable Devices</FONT><br></a>

<A href="relnote.htm#issues"><FONT face="Verdana, Arial, Helvetica" size="2">
		Installation Issues</FONT><br></a>
<A href="relnote.htm#asi"><FONT face="Verdana, Arial, Helvetica" size="2">Automated Software installer (ASI)</FONT><br></a>
<A href="relnote.htm#submissions"><FONT face="Verdana, Arial, Helvetica" size="2">Submissions</FONT><br></a>
<A href="relnote.htm#console"><FONT face="Verdana, Arial, Helvetica" size="2">Device Console</FONT><br></a>
<A href="relnote.htm#drt"><FONT face="Verdana, Arial, Helvetica" size="2">Device Reiability Tests (DRT)</FONT><br></a>
<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>
<A href="relnote.htm#job"><FONT face="Verdana, Arial, Helvetica" size="2">Jobs</FONT><br></a>
<A href="relnote.htm#run"><FONT face="Verdana, Arial, Helvetica" size="2">Run
Time</FONT><br></a>




</ul></font>
<br>

<!----------------------WDK Development Installation News---------------------------->

<P><B><FONT face="Verdana, Arial, Helvetica" size="+2">WDK Development
Installation News</FONT></B>
<UL>
<A name=devinstall></A>
<P><B><FONT face="Verdana, Arial, Helvetica" size="+1">Development Install
Issues</FONT></B>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>WDK Directory Structure</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The Windows Driver Kit (WDK)
combines and expands on the Windows Driver Development Kit (DDK) and the Windows
Hardware Compatibility Kit (HCT). The structure of the WDK directories is
similar to that of the Microsoft Windows Server&nbsp;2003 and Windows&nbsp;XP and Windows
Server&nbsp;2003 releases of the Windows DDK. This structure differs significantly
from the directory structure that was used in the Windows&nbsp;2000 release of the
Windows DDK.
</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Drivers should continue to
reference <i>Ntddk.h</i> or <i>Wdm.h</i> by specifying &quot;#include <wdm.h>&quot;. The
build environment automatically sets the appropriate include and library file
paths. Drivers may find that some header files have been moved from their
technology-specific directories (such as \network\inc) to a higher-level WDK
directory (such as \inc\wxp). Because these files moved to higher-level
directories, you do not have to specify the specific include path for these
files.
</FONT></P>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Changing the Default Installation Folder</b></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The WDK installs two major components.  The Driver Development Kit, which are known as the Build Environments and the Driver Test Manager.  By default they are installed in %SYSTEMDRIVE%\Program Manager\Microsoft Driver Test Manager for the DTM, and the Build Environments are installed under %SYSTEMDRIVE%\WinDDK.  To change the default installation paths for these components, you can select the features during WDK Setup and click on Browse for that Feature.  <b>Note:</b> that you can not change the default location at the root node, only at the Driver Development Kit and DTM Controller node.</FONT></P>


<A name=Active></A>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Active Perl</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">For more information about ActiveState Corporation's Active Perl, see the <A href="http://go.microsoft.com/fwlink/?linkid=10003&clcid=0x409">ActiveState Web site</A>.</FONT></P>

<P>
</UL>




<!-------------------------WDK Build Environment------------------------------------->
<A name=environments></A>
<P><B><FONT face="Verdana, Arial, Helvetica" size="+1">WDK Build Environments</FONT></B>

<UL>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>When to Use This WDK</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Use the WDK build
environments in this version of the WDK for evaluation and preview purposes
only. Do not use these WDK build environments for production-level coding. At
this time, you should use the Windows Server&nbsp;2003 SP1 DDK for production.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Use the <i>Windows Vista
build environments</i> in the WDK to build drivers that use new features or
functionality that is available only in Windows Vista.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Use the <i>Windows
Server&nbsp;2003 build environments</i> in the WDK to build drivers that use new
features or functionality that is available only in Windows Server&nbsp;2003.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Use the <i>Windows&nbsp;XP build
environments</i> in the WDK to build drivers that do not use new functionality
that is available only in Windows Vista or only in Windows Server&nbsp;2003 and
that are targeted for either Windows&nbsp;XP or Windows Server&nbsp;2003 and Windows&nbsp;XP.
The Windows&nbsp;XP build environments in the WDK contain minor updates to the
Windows DDK that shipped with Windows&nbsp;XP SP1 and with Windows&nbsp;XP.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Use the <i>Windows&nbsp;2000 build
environments</i> in the WDK to build drivers that are designed to run on Windows
Vista, Windows </FONT></font>Server&nbsp;2003, Windows&nbsp;XP, or Windows<FONT FACE="Verdana, Arial, Helvetica" SIZE=2>&nbsp;2000.
The Windows&nbsp;2000 build environment in the WDK includes updated headers and
libraries for Windows&nbsp;2000 Service Pack&nbsp;4 (SP4).</P>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Build Environment Incomplete Following Custom Installation</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The Custom installation option in Setup does not correctly manage the many component interdependencies and as a result is not guaranteed to produce a complete build environment.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;In order to ensure that all dependencies are met, you should perform a Complete installation.</font></p>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b><i>Ntddk.h</i> and <i>
Wdm.h</i> Restructured for Windows Vista</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The Windows Vista version of <i>Ntddk.h</i> now includes <i>Wdm.h</i>
(instead of duplicating information that is contained in <i>Wdm.h</i>). The
headers format changes <i>should not affect</i> which header files you include
or how you write your driver. Please be sure to file a bug report if you
discover any inconsistencies that this restructuring causes.</P>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Changes to Support
Conditional Compilation Based on Build Environment</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The WDK now includes the DDK_TARGET_OS environment variable to enable
conditional testing in the SOURCES file and determine if a driver is being built
in the Windows Vista, Windows Server&nbsp;2003, Windows&nbsp;XP, or Windows&nbsp;2000 build
environment. You can set this variable to &quot;Wlh&quot;, &quot;WinNET&quot;, &quot;WinXP&quot;, or &quot;Win2K&quot;,
respectively. For more information about this variable, see &quot;DDK_TARGET_OS&quot; in
the index of the WDK documentation.</P>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b><i>Winable.h</i>
Removed from the WDK</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The <i>Winable.h</i> header
file has been removed from the WDK. You can now find the declarations from this
file in <i>Winuser.h</i>.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;If your
project uses <i>Winable.h</i>, start using <i>Winuser.h</i> instead.</font></p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>There are no Build Environment icons to build free or checked x64 drivers for Windows XP</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The Windows XP Build Environments do not provide icons for either a "Windows XP x64 Free Build Environment" or "Windows XP x64 Checked Build Environment" to build drivers for Windows XP.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><B>Workaround</B>:&nbspUse the Windows Server 2003 x64 build environment icons to build free or checked x64 drivers for Windows XP.</font></p>

</ul>

<!-------------------------Header Versioning---------------------->
<A name=versioning></A>

<P><B><FONT face="Verdana, Arial, Helvetica" size="+1">Header Versioning</FONT></B>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Header Versioning
Activated</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">This release of the WDK implements a versioned header system. The overall
effect of this new system is that the WDK no longer contains operating
system-specific include directories under \inc. The WDK build environments are
configured for this change, but customized build environments that have
hard-coded include paths might break.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;Use the WDK
build environments, or update customized build environments appropriately.</font></p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Deprecations and Default Build Environment Settings</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">By default, the WDK build environments produce warnings for deprecated functions.  Some developers have reported that they get errors for deprecated functions.  This is probably due to the compiler flags being reset in the project's SOURCES file.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;Remove the line "MSC_WARNING_LEVEL=/W3 /WX" from the SOURCES file.
</font></p>
<br>


</ul>

<!-------------------------Driver Signing---------------------->
<A name=signing></A>
<P><B><FONT face="Verdana, Arial, Helvetica" size="+1">Driver Signing</FONT></B>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>New Tools to Support Driver Signing</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Windows Vista has a greater emphasis on using signed drivers. Tools have been added to the kit for driver signing during the development and test phases of driver development.   To install the tools, during WDK setup, select the WDK Build Environment, Samples and Documentation (Development Kit).  Under the Driver Development Kit, install the Build Environment option.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The tools are all command line tools that are available from all of the WDK Build Environments.  You can find the tools in the \bin\selfsign directory. You can read more about the use of these tools in the WDK documentation under "Device Installation\Design Guide\Device Installation Overview\Driver Signing (Windows Vista)".</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">WHQL has created a new tool for INF file validation and CAT file creation called INF2CAT.exe.  This tool is the successor to the signability.exe tool that is currently in the WDK.  If you are having problems using signability, you should try to install and use INF2CAT.exe.  Install INF2CAT from this location: <A href="https://winqual.microsoft.com/member/SubmissionWizard/controls/WinqualSubmissionTool.msi">https://winqual.microsoft.com/member/SubmissionWizard/controls/WinqualSubmissionTool.msi</A></FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">For Help on INF2CAT.exe, see: <A href="https://winqual.microsoft.com/help/default.htm#Inf2cat_FAQ.htm">https://winqual.microsoft.com/help/default.htm#Inf2cat_FAQ.htm</A></FONT></P>


<P><FONT face="Verdana, Arial, Helvetica" size="2">When using signability.exe to create catalog files for x64 platforms, the INF file must contain a Manufacturer and Model section.  For information on adding these sections to an INF file, look in the WDK documentation in the topic: <b>INF File Platform Extensions and x64-Based Systems.</b>  You can also find the information online at: <A href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/devinst_d/hh/DevInst_d/create-inf_51b5a6ff-b97f-4ff1-89de-c4f212611c45.xml.asp.">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/devinst_d/hh/DevInst_d/create-inf_51b5a6ff-b97f-4ff1-89de-c4f212611c45.xml.asp.</A> For general INF file information, see <b>Creating an INF file</B> at: <A href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/devinst_d/hh/DevInst_d/create-inf_f88cf176-2886-45a4-b93a-a12a572ebb16.xml.asp?frame=true">http://msdn.microsoft.com/library/default.asp?url=/library/en-us/devinst_d/hh/DevInst_d/create-inf_f88cf176-2886-45a4-b93a-a12a572ebb16.xml.asp?frame=true.</A></FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">For an example of an INF file with these sections, look at the toastpkg.inf file, found in the WDK under …\src\general\\toaster\toastpkg\toastcd.</FONT></P>



<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Driver Signing Enforcement on x64 Vista</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size=2>Windows Vista enforces that all drivers for x64 platforms must have a digital signature. Any kernel mode code must be signed with a valid certificate to load.</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2>Information on driver signing requirements for Windows Vista is available on the <A href="http://www.microsoft.com/whdc/default.mspx">WHDC</A> website.  A detailed <A href="http://www.microsoft.com/whdc/winlogo/drvsign/kmcs_walkthrough.mspx">walkthrough</A> document is available to aid with driver signing.</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2>An additional tool has been added to the WDK that is discussed in the walkthrough, but is not yet documented in the WDK documentation collection.  PVK2PFX.exe is used to convert a software publisher certificate into the format required to import it into the certificate store on the signing machine.  For information about the use of PVK2PFX.exe, please consult the <A href="http://www.microsoft.com/whdc/winlogo/drvsign/kmcs_walkthrough.mspx">walkthrough</A> document.</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2>During development and testing of kernel mode drivers, the following options are available to load kernel mode code which is not signed for public release:
<ol>
<li><b>Attach a kernel debugger</b>. Attaching an active kernel debugger to the target computer allows the driver to load on Windows Vista. 
<li><b>Use an F8 boot option</b>. An F8 boot option introduced with Windows Vista—“Disable Driver Signature Enforcement”—is available to disable the kernel-signing enforcement only for the current boot session. This setting does not persist across boot sessions. 
<li><b>Use a test certificate</b>. Follow the instructions in the WDK documentation to create a test certificate and sign the driver package. On the test system, set the boot configuration to enable test certificates. Windows Vista includes a command-line tool, BCDedit, which can be used to set this option. To use BCDedit, the user must have Elevated User or Administrator privileges on the system.</P>

<p><FONT face="Verdana, Arial, Helvetica" size=2>The syntax to enable test signing using BDCedit at the command prompt: 
	<ul>
	<li>Bcdedit.exe –set testsigning ON ---- //enable test certificates 
	<li>Bcdedit.exe –set testsigning OFF ---- //disable test certificates 
	<li>Bcdedit.exe –set {System ID GUID} testsigning ON ---- //enable test certificates on an alternate OS 
	</ul>
You must reboot after issuing the command.  When testsigning is successfully enabled, The four corners of the desktop will display the words "Test Mode".
</ol>
</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2>The BCDEdit option from Windows Vista Beta2 to disable driver integrity enforcement (nointegritychecks), is no longer supported in Windows Vista RTM by Winload or the kernel.  If you run the following command:</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bcdedit /set nointegritychecks ON</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2>The operation completes successfully.  Bcdedit displays NoIntegrityChecks as true (Yes), however, it has no effect on the behavior of the OS loader or kernel.  The only method to temporarily disable driver integrity checks is using the F8 boot option, Disable Driver Signature Enforcement.</font></P>&nbsp;<p>


</ul>
<p>


<!-------------------------Building WDK Samples---------------------->
<A name=samples></A>
<P><B><FONT face="Verdana, Arial, Helvetica" size="+1">Building WDK Samples</B></FONT>
<ul>



<P><FONT face="Verdana, Arial, Helvetica" size="2">Some samples may use new
features or functionality in Windows Vista. These samples will not build
properly in the Windows Server&nbsp;2003, Windows&nbsp;XP or Windows&nbsp;2000 build
environments. In addition, <i>some</i> samples use features or functionality
that first appeared in Windows&nbsp;XP. These samples will not build properly in the
Windows&nbsp;2000 build environments.</FONT></P>


<P><FONT face="Verdana, Arial, Helvetica" size="2">If you build the entire WDK,
samples that are not supported in the active build environment will not be built
because of one (or more) of the following issues:</FONT></P>

<ul>
<li>Changes to the driver's SOURCES file.<li>Changes to one of the driver's
MAKEFILE files.<li>Changes to a DIRS file.</ul>



<P>As a result, the &quot;correct&quot; set of drivers is always built when you open a
Command Prompt window for a given build environment and enter the <b>build -cZ</b>
command from the WDK base directory.</P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">When you open a Command
Prompt window for a given build environment, you can change directories to the
directory of a driver that uses features or functionality that are not supported
in that environment. If you attempt to build such a driver in an unsupported
environment, and if the driver was blocked from building by means of a DIRS
file, the build command fails with a variety of errors, warnings, or both. This
behavior is expected.</FONT></P>

<br>
<p>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Expected Warnings
- Building Samples in Windows&nbsp;XP and Windows&nbsp;2000 Environments</b></font></p>


<P><FONT face="Verdana, Arial, Helvetica" size="2">The Windows Server&nbsp;2003, Windows&nbsp;XP, and Windows&nbsp;2000 build environments do
not support some samples in the WDK. These samples now generate the following
warning (which will appear in the build warning log) when they are built in a
non-supported build environment:</P>

<P><FONT face="Verdana, Arial, Helvetica" size="2"><B>BUILDMSG: Warning : The
sample [path to sample] is not valid for the current OS target</B></P>

<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Multiple Instances of
the STI Driver Sample Cannot Be Installed</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The Still Image (STI) driver
sample contains two parts:</FONT></P>
<Ul>
<LI><i>SampUSD</i> is an STI user-mode minidriver. This sample shows how to
implement events in a minidriver. Events are hardware-initiated, usually caused
when the user pushes a button on the device. This sample uses a test file to
simulate hardware events so that you do not have to install hardware. When the
test file or its size changes, the minidriver simulates a hardware event.
<li><i>SampCPL</i> is an STI control panel extension that is located in \src\wdm\wia\Sampcpl.
This example shows how to add a tab to an STI device's Known Issues control
panel.&nbsp; </ul>
<p><FONT face="Verdana, Arial, Helvetica" size="2">You must build both parts to run the STI driver sample. Only one instance of
the STI driver sample should be installed because multiple instances are not
supported. This sample STI minidriver will not generate any events.</p>
<P><FONT face="Verdana, Arial, Helvetica" size="2"><b>Workaround:</b>&nbsp;Only one instance of the STI driver sample should be
installed.</p><br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Sample STI Driver
Will Not Generate Any Events</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;See the
preceding STI sample driver description.</font></p>



<br>


</ul>



<!-------------------------Compiling and Linking---------------------->
<A name=compiling></A>
<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>Compiling and Linking</b></p>

<UL>

<P><FONT face="Verdana, Arial, Helvetica" size="2">No late breaking news for Vista RTM.</p>

</ul>

<!-------------------------Display Drivers---------------------->


</ul>


</ul>

</ul>


<!----------------------Print Samples---------------------------->
<A name=printsamp></A>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>Printing Samples</b></p>
<ul>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Printing - Known Issues With The XPSDrv Sample</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The XPSDrv sample has an incorrect design that will cause the core driver to call the sample plug-in's IPrintOemPrintTicketProvider implementation with a non-conformant PrintTicket. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The root cause of the problem is that the XPSDrv sample defines both JobNUpPresentationOrder and DocumentNUpPresentationOrder in xdnup.gpd. This results in both features being present in the PrintTicket created by the core driver UnidrvUI after parsing the GPD. This is technically a non-conformant PrintTicket. The error messages after running PTConform on this PrintTicket are:</font>&nbsp;
<br>
<p><FONT face="Verdana, Arial, Helvetica" size=2>ERROR: There are 1 duplicate feature nodes for 'JobNUpPresentationOrder' which share the same suffix. This is not allowed as per the PrintSchema.<br>
ERROR: There are 1 duplicate feature nodes for 'DocumentNUpPresentationOrder' which share the same suffix. This is not allowed as per the PrintSchema.</font>&nbsp;<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2>The XPSDrv sample's IPrintOemPrintTicketProvider has specific code to correct this problem. This code deletes all the private features generated by the core driver parser from the GPD. But the design is incorrect in that a GPD must never require the plug-in to perform conformance related cleanup work. </font><br>

<p><FONT face="Verdana, Arial, Helvetica" size=2>In general, driver writers must not define their GPD/PPD in a manner that results in the core driver (UnidrvUI/PS5UI) sending the plug-in's IPrintOemPrintTicketProvider implementation a non-conformant PrintTicket.</font>&nbsp;<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2>When the Printing layer in Application Verifier is enabled, PrintTicket conformance checking will be performed at both the app-driver and driver-plug-in boundaries. Since the non-conformant PrintTicket described above is passed from the core driver to the plug-in, a warning indicating that the core driver is sending an invalid PrintTicket to the plug-in will be seen while running the application under the debugger. Since this message is set by default to be a "no-break" warning, it should not cause any impact apart from additional debug spew.</font></P>&nbsp;


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Printing - Known Issues With The WIA Monster Driver Sample</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The Extended WIA Monster Driver sample provided in the WDK will not work on Windows Vista if film scanning is chosen as the source of scan. The common scan dialog requires that WIA_IPS_FILM_SCAN_MODE should have value of type WIA_PROP_LIST where as the sample sets it to WIA_PROP_NONE. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The sample should be modified to set the value of WIA_IPS_FILM_SCAN_MODE to WIA_PROP_LIST for it to work for film scanning.</font></P>&nbsp;
<br>


</ul>
</ul>

<!----------------------UMDF---------------------------->
<A name=umdf></A>

<ul>
<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>UMDF</b></p>
<ul>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>UMDF 1.5 USB Samples Not Working on Windows XP Without Modifications</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The UMDF 1.5 USB samples in the WDK do not properly use the WinUsbCoinstaller to install WinUSB support.  As such they will not install on Windows XP or Windows Professional 2003 without modification.  They will install as-is on Windows Vista as WinUSB support is included "in-box". 
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>These samples will function on pre-Vista systems with a few simple modifications to the INF files.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Three modifications are needed in the INF/INX file in order to invoke the WinUsb co-installer.  The modifications needed differ slightly depending on the driver being modifed.  Examples are provided based on the INX file in the src\umdf\usb\echo_driver sample.
</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2>1) Add an entry to [SourceDisksFiles] to list WinUSBCoinstaller:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[SourceDisksFiles]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WUDFOsrUsbDriver.dll=1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WudfUpdate_$UMDFCOINSTALLERVERSION$.dll=1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WdfCoInstaller01005.dll=1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Add entry for WinUSB co-installer <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WinUSBCoInstaller.dll=1</font></P><br>


<P><FONT face="Verdana, Arial, Helvetica" size=2>2) Add WinUSBCoinstaller.dll to the [CoInstallers_CopyFiles] section:&nbsp;<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CoInstallers_CopyFiles]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WudfUpdate_$UMDFCOINSTALLERVERSION$.dll
vWdfCoInstaller01005.dll<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Add entry for WinUsbCoinstaller.dll<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WinUsbCoinstaller.dll</font></P><br>


<P><FONT face="Verdana, Arial, Helvetica" size=2>3) Change [CoInstallers_AddReg] to invoke the WinUsb co-installer&nbsp;<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[CoInstallers_AddReg]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; add entry to the end of the registry value for WinUSBCoInstaller<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HKR,,CoInstallers32,0x00010000,"WudfUpdate_$UMDFCOINSTALLERVERSION$.dll", "WdfCoInstaller01005.dll,WdfCoInstaller"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HKR,,CoInstallers32,0x00010000,"WudfUpdate_$UMDFCOINSTALLERVERSION$.dll", "WdfCoInstaller01005.dll,WdfCoInstaller", "WinUsbCoInstaller.dll"</font></P><br>

<P><FONT face="Verdana, Arial, Helvetica" size=2>Note that this applies only to the samples under the src\umdf\usb directory.  The other core UMDF samples (Skeleton and Echo) will function properly on Windows XP, Windows Professional 2003 & Windows Vista.</font></P>&nbsp;

</ul>
</ul>



<!----------------------KMDF---------------------------->
<A name=kmdf></A>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>KMDF</b></p>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>KMDF 1.5:  Migrating from 1.0 or 1.1 to 1.5</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The following installation and configuration changes are required in order to migrate from KMDF 1.0 or 1.1 to KMDF 1.5.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you are already using KMDF version 1.0 or 1.1 and want to migrate to version 1.5, make the following changes to your driver's INF file:<br>
<ul>
<li>DDInstall.CoInstallers section
<ul>
<li>Search and replace all instances of wdfcoinstaller01000.dll or wdfcoinstaller01001.dll with wdfcoinstaller01005.dll.
</ul>
<li>DDInstall.Wdf section
<ul>
<li>[XXX.NT.Wdf]
<li>KmdfService = YYYYY, XXX_wdfsect
<li>[XXX_wdfsect]
<li>KmdfLibraryVersion = 1.5
</ul>
</ul>
</font><br>

<FONT face="Verdana, Arial, Helvetica" size=2>The coinstaller uses the update.exe package installer to install the KMDF components. For Windows XP and Server 2003, the Cryptographic service must be enabled on your computer (This applies to version 1.0 also). To check whether the service is enabled, click Start, and then click Control Panel. Double-click Administrative Tools, and then double-click Computer Management. Click Services and Applications and then on Services. Locate and click on Cryptographic Services and check the service status. If the service is not started click on Start to enable it. 
</font><br>

<p><FONT face="Verdana, Arial, Helvetica" size=2>If you installed the beta version of KMDF, remove wdfldr.sys from system32\drivers and do not copy any files manually. 
</font><br>

<P><FONT face="Verdana, Arial, Helvetica" size=2>On Windows 2000 systems only, if you install multiple instances of the same driver or multiple KMDF drivers, you will see a dialogue box prompting you to reboot the system. You can ignore this message.  The reason for the message is that on Windows 2000 systems, SetupAPI tries to overwrite the already-installed KMDF coinstaller but it can't ignore the file-copy failure if the coinstaller is already present. The reboot message appears if you install multiple instances of the same driver, or multiple drivers that use KMDF, and when you right click on the properties in Device Manager for any of the individual device instances. You do not need to reboot your comuter -- the message can be ignored.  To prevent the message from appearing, set the COPYFLG_NO_OVERWRITE flag (0x00000010) in the .CoInstallers section of the driver's INF file, under the CopyFiles directive, as follows: <br>
<ul>
<li>[driver.CoInstallers]
<li>CopyFiles=CoInstaller_CopyFiles
<li>...
<li>[CoInstaller_CopyFiles]
<li>wdfcoinstaller01001.dll,,,0x00000010
</ul>
</font><p>

<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>KMDF 1.5 Known Issues</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The following are known issues in this version of the Kernel-Mode Driver Framework. 
</font></P>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Issues:</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>ETW Tracing</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>On Windows 2000, ETW tracing is not supported for miniport drivers. </font>&nbsp;<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>IFR Display</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The KMDF In-flight Recorder (IFR) may display wrong function names in the prefix of some log entries. A workaround is to reformat the log using a trace prefix format string that does not display function names, for example "%7!u!: %2!-20.20s! -- ". This can be done using the debugger command:<br>
-- !wdfsettraceprefix [trace prefix string]<br>
-- KMDF trace file Wdf01005.tmf is located in %BASEDIR%\tools\tracing\i386\<br>
</font>&nbsp;<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>KMDF-Based Drivers on Checked Builds 
</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>You cannot install a checked build of the KMDF runtime (WdfCoInstaller01005_chk.dll) on a free build of the OS. Similarly, a free build of the KMDF runtime cannot be installed on a checked build of the OS. To work around this issue, you can use a partial checked build and install the driver as follows: <br>
<ol>
<li>Install the partial checked build over a free build of the system, following the guidelines in Installing just the Checked Operating System and HAL in the Windows DDK.
<li>Boot the system in the free build.
<li>Install the KMDF-based driver. 
<li>Reboot the system in the partial checked build. 
</ol>
<br>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Or after your driver is installed with free version of the KMDF runtime (wdf01000.sys and wdfldr.sys), you can replace them with the checked version of the files provided with the kit. </font>&nbsp;<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>OSRUSBFX2 Driver</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>On Windows 2000, a USB device cannot be reset if there are pending transactions. The OSRUSB sample provides an IOCTL interface to reset the device. This driver configures a continuous reader on the interrupt pipe, which is in effect a pending transfer. Therefore, if you send a reset-device request, the request will be stuck in the USB until the pending transactions have been canceled. To work around this issue, the driver should stop the continuous reader (by calling WdfIoTargetStop) before resetting the device, and restart the continuous reader (by calling WdfIoTargetStart) after the request completes.</font>&nbsp;<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Serial Driver</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If the legacy Serial.sys driver (the inbox driver) is the power policy owner for the serial device stack, the stack cannot include a KMDF-based serial filter driver. Replacing the legacy driver with the serial driver provided in the KMDF samples resolves this issue. </font></P>&nbsp;<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Work Items</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>A WDFWORKITEM whose parent is a WDFFILEOBJECT (set by the ParentObject field in the WDF_OBJECT_ATTRIBUTES structure) cannot use the framework's automatic synchronization. Attempting to create such a work item causes WdfWorkItemCreate to fail with the error STATUS_INVALID_DEVICE_REQUEST. By default, WDF_WORKITEM_CONFIG_INIT() sets the AutomaticSerialization flag to TRUE. Consequently, to prevent this problem, the driver must set the value of AutomaticSerialization to FALSE in the WDF_WORKITEM_CONFIG structure as follows:<br>
-- WDF_WORKITEM_CONFIG config;<br>
-- WDF_WORKITEM_CONFIG_INIT(&config);<br>
-- config.AutomaticSerialization = FALSE; <br>
</font></P>&nbsp;




</ul>
</ul>
</ul>

<br>


<!----------------------Tools---------------------------->
<A name=tools></A>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>Tools</b></p>
<ul>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Traceview</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Using  TraceView to trace a driver, after starting up it sets up the the window, then fails with the error: Cannot start tracing session (StartTrace failed): Access is denied.</p>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;Use elevated command windows to start Traceview</font></p>
<br>

</ul>

<!----------------------DSF---------------------------->
<A name=dsf></A>

<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>Device Simulation Framework (DSF)</b></p>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Plugging In Non-powered Simulated Devices Is Not Supported</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>All simulated devices must be either self-powered and powered on, or bus powered before attempting to plug them into a simulated controller.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Connecting Multiple Simulated USB Devices Simultaneously May Result In Some Devices Not Eemuerating</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Simulated USB devices must be plugged into a controller or hub one at a time, and enumeration must complete before pluggin in any other device.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>You must wait for a simulated device to enumerate before plugging in any additonal devices to the controller or hub.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Simulated Device Fails To Re-enumerate After Unisnstall Or Disable</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If a simulated USB device is uninstalled or diasbled by using device mager or programatically, and the parent bus is rescanned, the device will fail to enumerate.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>None, will be fixed in next release.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Simulated External Hubs Must Be Connected To The Root Hub</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>DSF does not support plugging an external hub into the root hub of the controller if the external hub has any devices connected to its ports.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Connect the external hub to root hub, wait for it to enumerate, and then connect the device to the external hub.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>WDTF does not refresh device list after instantiation</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Windows Device Test Framework (WDTF) builds the list of available devices at framework instantiation. As a result, attempts to work around this limitation may be difficult. Creating multiple concurrent copies of WDTF within a process is not supported. Creating an instance of WDTF, retrieving a child object and then destroying the parent WDTF object, is not supported. This sequence of activity results in a WDTF crash when attempting to access the child object.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Choose one of the following workarounds:&nbsp;
<ol>
<li>Attach all desired devices to the system before creating a WDTF object.
<li>To check for device arrival and removal, run WDTF in a seperate process. This process should instantiate WDTF, check for desired information, and return that information as an exit code. This avoids access violation issues.
<li>Release all references to all WDTF objects in a process, and then create a new instance containing an updated device list. Since some languages contain garbage collectors, it may be difficult to verify that all references to an object have been released.
</ol>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Future versions of WDTF will support dynamic refreshing of device data. For more information about WDTF see the WDK documentation.</font></P>&nbsp;<p>


</ul>

<!----------------------Miscellaneous---------------------------->
<A name=miscellaneous></A>
<P><FONT face="Verdana, Arial, Helvetica" size="+1"><B>Miscellaneous</b></p>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Windows SideShow Detailed Documentation Not Available</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size="2">Windows SideShow™ is a new platform in Windows Vista™ that allows mini-applications called gadgets, running on the PC to send data to a variety of Windows SideShow-enabled devices, including dedicated devices embedded in a PC form factor (such as the lid of a laptop) or other multi-function devices that want to consume data from Windows SideShow (such as a cell phone).</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Hardware device manufacturers can create devices to show information from Windows SideShow.  They require firmware capable of display the information and a device driver that interfaces with the Windows SideShow platform. </FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">The platform components for Windows SideShow are available in this release. If you are interested in building a Windows SideShow-enabled device and would like further information post RTM, including draft documentation please contact:  <A href="mailto:winsshdk@microsoft.com">winsshdk@microsoft.com</A></FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Automated Software Installer appears as a prerequisite to install before installing the Windows Driver Kit or DTM</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size="2">ASI is listed as a prerequisite before installing the Windows Driver Kit. However, ASI is <b>not</b> required to be installed before the WDK Build Environments or DTM can be installed. ASI is optional to install.</FONT></P>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b> WpdHelloWorldDriver Memory Leak</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The declaration of a pointer to the IUnknown interface in the driver.cpp module of the WpdHelloWorldDriver needs to be revised as described in the following workaround.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Existing code:</b><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create queue callback object<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IUnknown *pIUnknown = NULL;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(S_OK == hr)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hr = CQueue::CreateInstance(&pIUnknown);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>


<p><FONT face="Verdana, Arial, Helvetica" size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Revised code:</b><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Create queue callback object<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CComPtr&lt;IUnknown&gt; pIUnknown;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(S_OK == hr)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hr = CQueue::CreateInstance(&pIUnknown);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>

</font></P>&nbsp;<p>


</ul>
<br>


<!----------------------Driver Test Manager---------------------------->
<P><B><FONT face="Verdana, Arial, Helvetica" size=+2>WDK Driver Test Manager News</B></P>
<UL>

<FONT face="Verdana, Arial, Helvetica" size="2"><H4>Please read the entire Tested Scenarios
section before installing Driver Test Manager.</H4></FONT></B></P>

<A name=INSTALL></A>
<B><FONT face=Verdana size=+1>Installing Driver Test Manager</FONT></B>

<br>
<br>

<!----------------------DTM Tested Scenarios - General---------------------------->
<A name=scenarios></A>
<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Tested Scenarios</H4></B>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The DTM computer configuration requires two or more computers, one running the DTM Controller and DTM Studio, and one or more as DTM test Clients.  The DTM Controller must be an x86-based computer running Windows Server 2003 SP1.  The DTM Installer provides automated installation of the primary prerequisites:</font></P>

<li><FONT face="Verdana, Arial, Helvetica" size=2>Microsoft .NET Framework version 2.0</font>
<li><FONT face="Verdana, Arial, Helvetica" size=2>Microsoft SQL Server 2000 Desktop Engine (MSDE) (less than 25 clients) or Microsoft SQL Server 2000 Workgroup Edition (26 to 150 clients)</font>
<li><FONT face="Verdana, Arial, Helvetica" size=2>DTM Controller</font>


<P><FONT face="Verdana, Arial, Helvetica" size="2">The DTM Controller also requires Microsoft .NET Framework version 1.1, which is included with Windows Server 2003 and is installed with the OS.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">Client computers can be x86, x64, and ia64, running Windows XP, Windows Server 2003, and their appropriate service packs, and Windows Vista.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">DTM Studio can be installed as a remote application on a different machine than the DTM Controller (not a Client), that is connected to the Controller, and can be installed on an x86 or x64-based computer running Windows XP or Windows Server 2003, and their appropriate service packs, or Windows Vista.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2">This early preview release of DTM has not been fully tested on all architectures and operating systems that are intended for the final product. As a result, there are potential risks if you install and run any portion of DTM on untested platforms. The DTM Controller has been tested on x86-based computers that run Windows Server 2003 SP1.  (Installing the DTM Controller on Windows XP or Windows Vista is not supported.)  DTM Studio has been tested on the Controller computer (running Windows Server 2003 SP1) as well as tested as a remote DTM Studio on a separate computer connected to the Controller, both x86 and x64-based, running Windows XP, Windows Server 2003, and Windows Vista.  The DTM clients have been tested on x86-based, IA64-based, and AMD64-based computers that run Windows Vista, Windows Server 2003, and Windows XP.</FONT></P>

<P><FONT face="Verdana, Arial, Helvetica" size="2"><b>Note:</b> To run the <b>Printing Device Capabilities</b> test or the <b>Printer Driver Stress</b> test on all operating systems except Windows Vista, you must attach a debugger.</FONT></P>
<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>ISDN Support Device for Analog Modems</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When using an ISDN support device for analog modem testing, the protocol setting configured for the ISDN support devices does not get applied to the modem when the support device is placing the call to the test modem until the system is rebooted. The symptoms will be that all 2 machine modem tests will fail when calling from the support device to the test modem.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Reboot the machine that the support modem is connected to after the modem is installed but before you start testing with DTM.</font></P>&nbsp;


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Error Message: "<Machinename> - Cannot reset Machine because the Machine Pool does not have a Job Delivery Agent</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When the client software is initially installed on any system, the system will show up under its machine name under the DTM Controller's Default Pool.  If the user attempts to right-click one of more systems in Default Pool, go to Change Status, and tries to Reset the system(s), they are unable to do so.  This is  the expected behavior, but the error message is not clear:<b>  
"<Machinename> - Cannot reset Machine because the Machine Pool does not have a Job Delivery Agent.</b>"  While this error is factually correct, it does not inform the user how to solve the problem.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Machines cannot be set to 'Reset' while still in the Default Pool.  The user must move the machine(s) in question to a different Machine Pool before attempting to Change Status to Reset and beginning to schedule jobs.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>User Permissions Cannot be Set on a Remote DTM Studio</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>User permissions, such as adding or deleting users, or granting permissions to users, cannot be done on a DTM Studio installation on a computer that is not also the DTM Controller (also referred to as a 'remote DTM Studio').  If this is attempted, an error similar to the following will be displayed:</p>
<ul>
Bulk Operation Error<br>
Error encountered while adding user (domain\alias)
</ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Perform all user permission actions on a DTM Studio installation on the same computer as the DTM Controller was installed.</font></P>&nbsp;<p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>MCE Remote Control Test</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>MCE Remote Control test should be marked as a manual test. The test requires manual interaction despite not being flagged as such. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>None</font></P>&nbsp;<p>



<br>

</ul>
</ul>

<!----------------------Tested Scenarios PnPD---------------------------->
<ul>
<br><A name=pnpd></A>

<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Tested Scenarios - PnPD</H4></B></font>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>PnPDTest Job fails On USB Devices Which Support Selective Suspend</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>On Windows Vista clients, the PnpDTest job will fail for USB devices which support the USB Selective Suspend feature.
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>During the "surprise remove" task of the PnPDTest job, the test sends a "soft" surprise remove IRP to the device.  Because of a bug in the way "software-initiated surprise removals" are handled, the device will come back "Code 10" (the driver will fail to load).  The subsequent "rebalance" task will fail because the device is no longer enumerated properly.
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Because the machine reboots at the end of the PnPDTest job, no subsequent scheduled jobs are affected by this failure.
</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Before running the PnPDTest job on the client system:
</font>&nbsp;<br>
<ol>
<li>Open up Device Manager<br>
<li>Find the device, right-click and select "properties" to open up the device properties dialog<br>
<li>On the "Power Management" tab, UN-CHECK the box marked "Allow the computer to turn off this device to save power."  This will disable selective suspend on this device.<br>
<li>Select "OK" to save changes to the device properties dialog<br>
<li>Schedule the PnPDTest job normally via Device Console<br>
<li>After the job finishes, on the client re-enable selective suspend on the device by  opening the device properties dialog and re-checking the box marked "Allow the computer to turn off this device to save power." <br>
</ol>


</ul>


<br>

<!----------------------Tested Scenarios Storage---------------------------->

<br><A name=storage></A>

<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Tested Scenarios - Storage</H4></B></font>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage Testing News</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>For up to date information about running tests from the Storage Logo kit, please see <A href="http://blogs.msdn.com/storwdk">http://blogs.msdn.com/storwdk</A>.</font></P>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage - CD/DVD Logo Program - UDF Formatter Test</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>1) The test does not prompt the user to insert RW media, however, the test will fail if there is no RW media in the drive. The test would run only on CD-RW or DVD+/-RW media.  2) The test will fail if the inserted RW media is bad and the test failed to format it. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>1) Please insert RW media into the drive before running the test.
 2) If the test fails because of format failure, please use new RW media and re-run the test 
</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage - Hybrid Disk Logo Test</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>To calculate the latency and throughput of the disk, the test reads and writes to the disk directly. Because of this, the data on the drive would be lost.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Please run this test on a formatted blank drive.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage - iSCSI Logo Program</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The iSCSI CHAP test, Ping test, and Redirection test will fail due to interference by IPSEC policies and/or NAP (Network Access Protection) agent settings if the test machine is joined to the domain. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Please run the iSCSI logo program in a workgroup environment instead of domain joined DTM setup.  Be sure that your network environment does not employ any software or hardware firewalls, or other means for restricting network traffic. 
</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage - CD/DVD Logo Program - MMC Test</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Slim type drives do not support an electronic inject mechanism. The test attempts to inject the tray using start stop command and will fail.  To further continue testing, the user has to inject the tray manually.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When the test is verifying the start stop unit command to inject the tray, manually inject the tray if the drive does not support an electronic inject mechanism.
</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage - Optical and Removable Logo Programs</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If the device doesnt support an electronic eject/inject mechanism, the user has to select the check box in the submission wizard for the screen "Please check if the test device only supports a mechanical eject mechanism such as a flip top lid, force button eject, push-in/push-eject mechanism, etc.". This screen may not be displayed properly if the DTM studio is installed on Vista machine.
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Please select the check box if the device doesnt support eject inject mechanism. Please install DTM studio on Windows XP or Windows server 2003 to view this screen properly.
</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage - SCSI Compliance Test</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The SCSI Compliance test writes to sector 0 on the test device.  This will corrupt the boot sector and partition table of the test device.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>After running the SCSI Compliance test, repartition the test device and format the volumes, as specified in the setup documentation.</font></P>&nbsp;<p>




</ul>
</ul>
<!----------------------Tested Scenarios Print---------------------------->
<ul>
<br><A name=print></A>

<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Tested Scenarios - Print</H4></B></font>
<ul>

<P><B><FONT face="Verdana, Arial, Helvetica" size="2">Client Printer Folder Contents Appearing in DTM Studio UI</FONT></B>
<P><FONT face="Verdana, Arial, Helvetica" size="2">Any print device that appears in the client printer folder will show up in the DTM Studio UI.  If you do not want to see printers that have been removed or are offline, delete them from the client printer folder.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;If the DTM and Print Folder don’t match, close studio and restart the client.  From the WDK Studio you can determine if a USB printer is available by right clicking the device and selecting “View Device XML” and verifying that the device is not associated to a WDK Virtual Device Node.  Virtual device nodes will have a DeviceID value that says “WDKVirtualDevice”.</font></p><br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Print Client and AppVerifier Warning</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Any machine added to a machine pool that has been configured for printer testing will receive a pop-up warning the user to install AppVerifier on the client system in order to continue.</font>
<P><FONT face="Verdana, Arial, Helvetica" size=2>No other tests can be run on the client system until the user logs in and dismisses the warning.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Once the config job is running on a client system, log into the client and dismiss the AppVerifier warning.  Refer to the WDK doc's for client and machine pool setup instructions including how to install AppVerifier.</font></P><br>


</ul>
<!----------------------Tested Scenarios Portable Devices---------------------------->
<br><A name=portable></A>

<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Tested Scenarios - Portable Devices</H4></B></font>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Portable Devices Cellular Handset Logo Not Required For Cellular Phones Supporting MSC or MTP Protocols</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The Cellular Handset Windows Logo Requirements apply only to vendors intending to provide Windows Portable Devices (WPD) drivers for their devices.
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Cellular Handsets devices that install as Mass Storage Class (MSC) or Media Transfer Protocol (MTP) devices use the WPDFS and WPDMTP inbox class drivers to communciate with WPD client applications.   These devices are not subject to the Cellular Handset Windows Logo Requirements.   
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>For more details on Windows Portable Devices: <A href="http://msdn.microsoft.com/library/en-us/WPD_DK/htm/windowsportabledevicesdriver.asp">http://msdn.microsoft.com/library/en-us/WPD_DK/htm/windowsportabledevicesdriver.asp</A>.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If the vendor provides a bus driver that requires a Logo, such as bluetooth, USB, or other proprietary protocol, you should check with WHQL on the applicable Logo requirement.  In most cases, the "Unclassified" Logo would apply.</font></P>&nbsp;<p>


</ul>
</ul>
<br>
<!----------------------DTM Install Issues---------------------------->
<ul>
<br><A name=issues></A>
<P><FONT face="Verdana, Arial, Helvetica">
<B>
<H4>Installation Issues</H4></B>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>DTM Studio: Uninstall Previous Versions Before Installing DTM Controller</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>It is already understood that when the RTM version of WDK DTM Controller is released all customers must uninstall currently installed DTM Controllers before they install the new Controller, this release note is to indicate that it is also imperative that any previously installed DTM Studio must be uninstalled before RTM DTM Controller is installed, otherwise it is possible to get stuck into an endless loop of Studio Auto-update install the next time DTM Studio is launched. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Simply uninstall any previously installed versions of DTM Studio before the RTM version of DTM Studio is installed.  If you get stuck in the endless loop please refer to the release note for "DTM Studio: recovering from endless Auto-update"</font></P><br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>IE7 Interim Builds Cause DTM Controller To Fail Install
</b></font><br>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Before installing WDK DTM Controller ensure you have either IE6 or IE7 (RTM) installed, if any other interim build of IE7 is installed, WDK will fail to install.</font></P>
<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>DTM Studio: Recovering From Endless Auto-update</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you neglect to uninstall a previously installed DTM Studio before installing the RTM version of WDK DTM Controller, you may notice that DTM Studio has a pop-up message indicating an Auto-update is available, clicking OK seems to install something, but quickly returns you to the Auto-update pop-up message again.  This will repeat endlessly until you click Cancel, which starts your old copy of DTM Studio. </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>You must complete all 6 steps in this exact order or you may end up in an undetermined state;<br>
<ol>
<li>Launch DTM Studio and notice the Auto-upgrade pop-up message
<li>clicking OK simply returns you to this Auto-update message repeatedly
<li>Click Cancel so that Studio opens, then exit/close DTM Studio
<li>access Add/Remove Programs and select Remove DTM Studio (follow prompts to remove DTM Studio)
<li>install new DTM Studio from the DTM Controller; \\[controllername]\dtminstall\studio\setup.exe /qb
<li>now open studio, it will be the correct RTM version at this time
</ol>
</font></P>&nbsp;<p>




<P><FONT face="Verdana, Arial, Helvetica" size=2><b>WDK controller Installed on x86-based Computers</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>You can install the DTM controller only on x86-based
computers running Windows Server 2003 SP1 in this release of the WDK.</font></P>
<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Do Not Install DTM Components on a Domain Controller</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When using the DTM in a domain environment, it is important that you do not install any of the DTM components on the domain controller.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Install the DTM componets on machines other than the domain controller.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b> Installing DTM on a domain requires Microsoft Active Directory</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you install, configure and plan to use DTM Controller, Studio and Clients on a domain you must have Microsoft Active Directory configured and running. Otherwise the DTM Controller install may fail and user management through DTM Studio / Management Console will be blocked.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Ensure Microsoft Active Directory is configured and running if you plan to use DTM Controller, Studio and Clients on a domain.  Some customers still fail due to Domain configuration and policies, so as an additional workaround install DTM Controller with local Admin permissions but then create a new Group on the system where DTM Controller is installed. Then add your Domain users to this group and then add this Group to your Management Console.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Winsock Error On Workgroup DTM Clients May Be Due To Network Category Being Set To Public Network</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>For Workgroup configurations, Vista now differentiates between "Public" and "Private" network categories as an added networking security feature.  There is a default dialog that comes up on the first bootup of a new Vista OS install asking the user how they want to set the network category.  if the DTM Vista Client is set to Public, the user may well experience the following problem:
	<ul>
	<li> winsock error on clients
	</ul>
</font>
<FONT face="Verdana, Arial, Helvetica" size=2>Clients can connect to the DTM Controller but will not reset to Ready status.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>To resolve this problem, go into the Vista Control Panel and click on the link under 'Network and Internet - View network status and tasks'.  When the Network Center comes up, check the entry for 'Network category' under 'Network details'.  If this is set to 'Public network', click the 'Change to private' link and it will make the switch.  No other steps should be necessary.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>MSDE-related performance issues</b></font></p>

<P><FONT face="Verdana, Arial, Helvetica" size=2>DTM can use either Microsoft Desktop Database Engine (MSDE), Microsoft SQL Server, or SQL Server for Workgorups
for its data stores. Because MSDE is a subset of SQL Server, certain limitations occur. One limitation
of MSDE is that a maximum of eight concurrent database operations can be running at any given time.
Note that this limitation is eight concurrent operations, and not eight concurrent users. In normal operation
of DTM with a large number of client computers (that is, computers under test),
you can exceed this limit of eight concurrent operations. When you exceed this
limit, DTM performance degrades significantly, and in some cases, stops altogether.
In addition, test clients might appear to be stuck in the PD or the EA pipelines.</font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>Although DTM will support up to 150 clients per controller,
we recommend that you select SQL Server as the database engine when the number
of client computers in a single machine pool (that is, jointly participating in
the execution of a series of jobs) exceeds 25 computers. MSDE is typically sufficient for machine pools of up to 25 client computers.</font></p>


<P><FONT face="Verdana, Arial, Helvetica" size="2">When installing MSDE on a non-English language OS, you must install MSDE with a special collation parameter.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;Uninstall MSDE, and reinstall MSDE with the the command line:<b> \msde\setup sapwd=”AdminPassword” disablenetworkprotocols=0 COLLATION=SQL_Latin1_General_CP1_CI_AS</b></font></p>


<br>


<P><FONT face="Verdana, Arial, Helvetica" size=2>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Problems with computer naming
conventions</b></font></p>
<P>Problems occur with custom dimensions when the machine name of a client computer contains the name of the controller computer that the client is attached to. For example, if the machine name of
a controller is “TestLab1”, and the name of a client computer is “TestLab1Client1”, the custom dimension problem will occur.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>Do not use the machine name of the controller when defining
client computer names.</font></p>
<br>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>TCP/IP connection limitation</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>By default, TCP/IP establishes a limit on the number of connections it can simultaneously support and a default timeout period before the connection is automatically recycled.
Because of the design of some of the communications components in DTM, you can
exceed this limit of concurrent connections under heavy traffic conditions.
Because many of the connections that DTM requires are very short–lived, you can mitigate any connection problems by reducing the connection timeout period in TCP/IP. The following
KB articles describe how to adjust the TCP/IP settings:</font></P>
<ul>
	<li><A href="http://support.microsoft.com/default.aspx?scid=kb;en;Q319502">http://support.microsoft.com/default.aspx?scid=kb;en;Q319502</A>
	<li><A href="http://support.microsoft.com/default.aspx?scid=kb;en;Q328476">http://support.microsoft.com/default.aspx?scid=kb;en;Q328476</A>
</UL><br>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>DTM controller installed on
Windows Vista or Windows XP is not supported</b></font></p>
<P>Windows Vista and Windows XP are not supported as a DTM controller.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>Use Windows Server&nbsp;2003 as the operating system for your controller computer.</font></p>
<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Controller issues with TCP/IP version 6</b></font></p>

<P>IPv6 will only work with Win2k3 as a controller (Studio doesn't support IPv6 due to .NET v1.1 and 2.0 not supporting IPv6.) Client and Controller will work. XP uses a DEV version of IPv6 and should be used for testing.</P>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>To enable IPv6 open a cmd window, type "netsh interface ipv6 install". When the window returns an ok, reboot the system. After reboot open cmd window and verify by typing "ipconfig /all" and verify IPv6 address is enabled.</font></p>
<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Access denied in DTM Studio
when attempting to access a controller's datastore</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>A data-store access violation occurs
in DTM Studio if all of the following conditions are met:</font></P>
<ul>
	<li>A different user installed the DTM controller on a different computer
	from DTM Studio.<li>The controller owner did not add you to the datastores user database with permissions.
</ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>This
behavior is expected.  To work around this behavior, do the following:</font></p>
<ol>
	<li>Install and open DTM Studio.<li>On the <b>Tools</b> menu, click <b>Management Console</b>.
	<li>Open Enterprises\<i>ControllerName</i>\Datastores\<i>ControllerName</i>\Users.<li>
	Right-click on File\New\User and enter your proper credentials. Use the
	domain\username convention.&nbsp;If this is a workgroup, create a local NT user
	and enter <i>ControllerName</i>\<i>NewUsername</i>.<li>Assign the desired credentials to the user</font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font></font><FONT face="Verdana" size="2">—</font><FONT face="Verdana, Arial, Helvetica" size="2">likely dtm_DatastoreUsers.
</ol><br>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Unable to install client/Studio from install shares if ICF
is enabled by using Windows Server&nbsp;2003 SP1</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you install the DTM controller on a
computer that runs Windows Server&nbsp;2003 SP1 and Internet Connection Firewall (ICF) is enabled, you must also enable the "File and Printer sharing" exception within the ICF control panel.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>Do the
following:</font></p>
<ol>
	<li>On the taskbar, click <b>Start</b>, and then click <b>Control Panel</b>.<li>
	Double-click <b>Network Connections</b>, and then open your internet
	connection.<li>Click <b>Properties</b>, and then click the<b> Advanced</b>
	tab.<b> </b>
	<li>Click <b>Settings</b>, and then click the <b>Exceptions</b> tab.
	<li>Select the <b>File and Printer Sharing</b> check box.</ol>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Internet Connection Firewall (ICF) Is Enabled On DTM Controller</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Disable ICF on DTM Controller system.</font></P>&nbsp;<p>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>DTM Studio: Management Console: Adding Domain Accounts</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When adding new users in DTM Studio / Management Console, you must be logged in and running DTM Studio as a valid domain user in order to add domain user accounts.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Run DTM Studio as domain account to add domain users, otherwise only run DTM Studio as local account to add local users.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Ensure Microsoft Active Directory is configured and running if you plan to use DTM Controller, Studio and Clients on a domain.  Some customers still fail due to Domain configuration and policies, so as an additional workaround you may also create a new Group on the system where DTM Controller is installed, add your Domain users to this group and then add this Group to your Management Console.</font></P>&nbsp;



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>How To Limit The DTM Transaction Log</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Documentation is provided at:<A href="http://www.support.microsoft.com/?id=272318">http://www.support.microsoft.com/?id=272318</A>.</font></P>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>WDK DTM Studio: Unable To See Text In Edit Fields</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Changing the background and foreground default color schemes may make it impossible to read any text fields in the DTM Studio.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>This is a known issue and will be fixed in later releases of the DTM.</font></P>&nbsp;



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage Tests and Installing to Hard Disk</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Install the operating system to C: when running Storage Controller, RAID System, and iSCSI Boot Component logo programs. The crashdump test relies on having the operating system installed on the C: drive.  This test is present in the following logo programs:
	<ul>
	<li> Storage > Adapter or Controller > ATA
	<li> Storage> Adapter or Controller > ATA RAID
	<li> Storage> Adapter or Controller > Fibre Channel
	<li> Storage> Adapter or Controller > iSCSI Boot Component
	<li> Storage> Adapter or Controller > iSCSI HBA
	<li> Storage> Adapter or Controller > SAS
	<li> Storage> Adapter or Controller > SAS-RAID
	<li> Storage> Adapter or Controller > SCSI
	<li> Storage> Adapter or Controller > SCSI RAID
	<li> Storage> Adapter or Controller > Serial ATA
	<li> Storage> Adapter or Controller > Serial ATA RAID
	<li> Storage > RAID Storage > Hardware based RAID System > Fibre Channel
	<li> Storage> RAID Storage > Hardware based RAID System > iSCSI
	<li> Storage> RAID Storage > Hardware based RAID System > SAS
	<li> Storage> RAID Storage > Hardware based RAID System > SATA
	<li> Storage> RAID Storage > Hardware based RAID System > SCSI
	</ul>

<p><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Install the operating system to the C: drive. Also install the symbols to the same drive. See the test documentation for details.</font></P>&nbsp;


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Audio Tests Fail on Disconnected Dynamic Jacks</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>For HDAudio solutions which implement dynamic jack detection, audio tests may not detect any audio devices, and will fail.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Ensure that any dynamic jacks have cables plugged in before running the audio tests.</font></P>&nbsp;<p>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Non-Domain XP Controller Installations For The DTM</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When installing the DTM in a workgroup scenario, none of the sysparse information is copied to the controller since the WTTSystemLogs directory is shared as read only. Therefore, the permissions for "Everyone" is not set to full control to that same folder.  The result is that in Device Console the the device and machine information is not available and only the testpool name is availble without machines or devices available to test.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>View the properties of the Wttsystemlog folder and ensure that the "everyone" account under the shared folder is set to full control. Then unselect the "read only" option on the folders properties.</font></P>&nbsp;



</ul>
<!----------------------DTM ASI Issues---------------------------->
<A name=asi></A></p>
<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Automated Software Installer (ASI)</H4></B>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>ASI Shares on Windows XP Systems Without a Domain</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size="2">If you install the ASI server on a Windows XP system which is a member of a workgroup, not a domain, users will get an Access Denied error when attempting to access some of the shares created by ASI server setup.  The following shares are created by setup: ASICache, Drivers, & ASI.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;On the server, browse to the shared folders, go to sharing and security, uncheck the box that says, "share this folder...", click Apply.  Check the box and click Apply again.</font></p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Packager Cannot Create New Packages</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size="2">Attempting to create a package will result in an unhandled exception.</FONT></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b>&nbsp;None.  This Issue will be fixed in future releases of the WDK.</font></p>

<br>




</ul>
<!----------------------DTM Submission Issues---------------------------->
<A name=submissions></A></p>
<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Submission Issues</H4></B>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Creating a Submission Package</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Important:</b> If any of the computers that were used to run the logo tests is missing from the machine pool when you try to create a submission package, a foreign key violation error message will appear.
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Make sure to leave all the relevant computers in the machine pool until you have completed the submission package.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Storage Logo Submissions for JBOD and RAID systems</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>To logo the JBOD or RAID systems, the user has to select all the disks behind these devices and schedules the jobs. The storage scheduler schedules the selected job(s) on all the disks behind JBOD or RAID. It duplicates the jobs make the jobs run on all the disk drives in the submission. But the DTM doesnt schedule the way the scheduler exptects. This scenario makes the customers unable to logo these devices (JBOD, RAID)</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>None at this time.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Submission Names and Illegal Characters</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Using any of the following characters when choosing a submission name will result in an unhandled exception when the submission status tool is executed. This will result in a submission package that does not contain all the required information, and will not be submittable for logo. The illegal characters are:<b>\ / : * ? " < > | - #</b>.  This is a known issue and will be fixed in the next release of the DTM</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Choose submission names that do not contain any of the illegal characters listed above.</font></P>&nbsp;


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Parsing Logs</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When parsing very large DTM logs, or changing views on a large log, you may experience significant delays. This is a function of XML. Currently, there is no convenient mechanism to abort the rendering, short of closing the Studio. Microsoft will investigate alternate solutions to provide options to cancel renderings in future versions of the DTM.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you are experiencing unacceptable delays when viewing a large log file and wish to abort the rendering, close and re-open Studio.</font></P>&nbsp;


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Opening a Submission When Driver Package Not Available</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When starting a new submission for testing a driver, you are asked to point to the driver inf.  If after starting the submission, the driver package is moved from its original location Device Console, the user will no longer be able to re-open that submission until the driver package is restored to its original location.  In addition, if the driver package is on the local system, a user on another system will not be able to open that submission.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When starting submissions, point to a driver that is on a network share that will be maintained for the life of the submission.</font></P>&nbsp;



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>DTM Cannot Find Matching Devices With Inf Only Submission</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If doing a submission against an inf only submission, the Device console will not find devices to test against since none will match the hash value of the inf file entered.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Verify all the machines added to the test pool only have devices that match the inf being submitted for Logo. Then the tests aren’t incorrectly scheduled onto a machine without the logo device in it.</font></P>&nbsp;



</ul>

<!----------------------DTM Device Console---------------------------->
<A name=console></A></p>
<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Device Console</H4></B>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Loading Saved Job List Causes Automatically Run</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The is an option in the Device console that allows you to save a list of jobs that have been selected. When you re-load a list of jobs saved in this manner, the jobs will automatically be sent to the scheduler, without giving you an option to edit the list.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>This is known behavior. There is no work-around at this time.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Opening Device Console Before Testpool Causes error</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When you first install the DTM and Studio and attempt to open Device Console before creating a testpool, you will get an error pop-up that will say:<br>

&nbsp;&nbsp;&nbsp;&nbsp;Device Console<br>
&nbsp;&nbsp;&nbsp;&nbsp;Failed to load Device Console<br>
&nbsp;&nbsp;&nbsp;&nbsp;System.NullReferenceException: Object reference not set to an instance of an object<br>
&nbsp;&nbsp;&nbsp;&nbsp;at Microsoft.DistributedAutomation.DeviceSelection.SelectionControl.LoadDevices()<br>
&nbsp;&nbsp;&nbsp;&nbsp;at Microsoft.DistributedAutomation.DeviceSelection.SelectionControl.InitialLoad()<br></font></P>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Before opening Device Console for the first time create a testpool and add a client.
	<ol>
	<li> Open Job Monitor
	<li> Create a testpool
	<li> Put a client in the testpool
	<li> Reset the client
	<li> Open Device Console 
	</ol>

<P><FONT face="Verdana, Arial, Helvetica" size=2>If you have already hit this error take these actions:
	<ol>
	<li> Press OK on the dialog
	<li> Close Device Console
	<li> Open Job Monitor
	<li> Create a testpool
	<li> Put a client in the testpool
	<li> Reset the client
	<li> Open Device Console
	</ol>
</font></P>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Switching Display Submissions</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When switching submissions in device console, it impacts display customer scheduler's ability to apply constrains/params to the jobs being scheduled.  After making a switch, the jobs being scheduled are lacking any of the constraints/params needed to run.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>None.  Fixing in a later release of the WDK.</font></P>&nbsp;

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Vista Studio - Test List Not Showing</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When creating a new submission in device console, your test list may not show up upon completion of the wizard.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Follow these steps:
	<ol>
	<li> Create your submission as you normally would
	<li> Your 'Available Jobs' pane comes up empty
	<li> Press 'F-5' or 'View->Refresh
	<li> Your jobs will show up appropriately
	</ol>
</font></P>&nbsp;


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Device Selection UI For Printers Shows System Drivers</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When a printer submission is created in the DTM for a non-physically attached printer (virtual, null port, network attached, etc.) other system drivers will show up in the device selection UI.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Choose the printer in the left pane before selecting jobs to schedule from the right pane.  Do not schedule jobs against system drivers.</font></P>&nbsp;

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Mouse Tests Not Appearing</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The mouse test does not appear in the device console while in submission mode when doing Input > Mouse testing.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>None at this time.</font></P>&nbsp;


</ul>
<br>

<!----------------------DRT---------------------------->
<A name=drt></A>
<FONT face="Verdana, Arial, Helvetica"><B><H4>Driver Reliability Tests</H4></B>
<ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>DTM Workgroup Configuration and Domain IPsec Policies 
</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When installing an OS on client computer in a domain environment, then moving that computer to a Workgroup for connection to a Workgroup-configured DTM controller, domain IPsec policies may remain in effect and prevent the client from communicating to the controller.  Affects Windows Vista clients only.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Correctly configure IPsec policies after moving the computer to Workgroup.  Another workaround is to disable IPsec services entirely using Computer Management.  In the services window, right click Base Filtering Engine service, select Properties, select Startup Type, chose Disabled then click Apply.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Installing the WDK Build Environment on DTM Clients</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If the WDK build environment is installed on a DTM client before Client setup, the TestBinRoot and WoW64TestBinRoot dimensions may not become properly set on the client.  This results in CopyTask failures when running test jobs on the client. 
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Install DTM client before installing the WDK build environment.</font></P>&nbsp;<p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Prefast for Drivers Requirement Clarification</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2> If your submission package contains a kernel-mode device driver or service, you must include the Prefast for Drivers summary results file (DefectSum.txt) with your submission.  You should not include the actual Prefast log file (Defect.xml).   
 </font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>To include the summary results file (DefectSum.txt), follow the instructions in the Prefast for Drivers Test documentation.  If your submission package does not contain a kernel-mode device driver or service, then you are not required to enter the results file and the Prefast for Drivers test will automatically run and pass. 
</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Driver Reliabilty Tests Copyfile Tasks May Fail on Windows Vista</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>In some domain configurations, site-specific security policies may cause Vista clients to fail copyfile tasks of Driver Reliability tests.  
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you experience this problem, disable Windows Firewall on both the Controller and Clients.  Also disable the Base Filtering Engine service.  In the Computer Management services window, right click the Base Filtering Engine service, select Properties, select Startup Type, chose Disabled then click Apply.</font></P>&nbsp;<p>





<P><FONT face="Verdana, Arial, Helvetica" size=2><b> Driver Reliability Test Jobs Fail With Parameter [WTT\TestBinRoot] Not Found</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>After initial client setup, some jobs may fail with the following error messages:</font></P>
<ul>
<li>Parameter [WTT\WoW64TestBinRoot] not found
<li>Parameter [WTT\TestBinRoot] not found
</ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you experience this error, open Job Explorer. Under the Feature tab open WDK Tests, then Configuration.  Schedule the following job on the client computer: Run FIRST - Configure TestBinRoots on Client System.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Driver Reliability Stress Tests Not resuming From Standby</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2> Driver Reliability tests Sleep Stress with IO and Common Scenario Stress with IO do not return from standby. Tests which excercise ACPI sleep states require auto-logon after resuming from standby, otherwise the tests will hang.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>On each client computer use regedit.exe to enable AutoAdminLogon with a local adminstrator account.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Driver Reliability Tests Prematurely Terminate</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Driver Reliability Tests Sleep Stress with IO, Disable Enable with IO and Common Scenario Stress with IO prematurely terminate after about 2 - 3 minutes with a passing result.  This is a known issue and will be corrected in the next release.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Take no action.  Be advised the tests will run to their full runtime in the next release of the WDK.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Driver Reliability Static Analysis Tools Prematurely Terminate</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Driver Reliability Static Analysis tools Prefast for Drivers (PFD) and Static Driver Verifier (SDV) will prematurely terminate with a passing result if no job parameters are entered.  The resulting submission package will not contain the PFD summary results file which is required for Logo or Unclassified Signature if your submission contains a kernel-mode device driver or kernel-mode service.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>This is by design.  Correct use of PFD and SDV is documented in the WDK documentation.</font></P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Driver Reliability Tests May Schedule and Fail in Device-Only and INF-Only Submission Scenarios</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>In Device-only and INF-only submission scenarios where there is no associated kernel-mode device driver or service, the Driver Reliability Tests will schedule and in some cases fail.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>This is a known issue and will be corrected in the next release of the WDK.  Treat any test errors from Driver Reliability Tests as Erratas in Device-only and INF-only scenarios.</font></P>&nbsp;<p>



</ul>
</OL>
<!----------------------DTM Jobs---------------------------->
<A name=job>
</A><FONT face="Verdana, Arial, Helvetica"><B><H4>Jobs</H4></B>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Any network share that a job
  references, such as a share that contains test executables, must be
  shared out to the "everyone" group. Currently, all security information that
you
  enter into DTM is manipulated and stored in clear text. This
  type of storage might impact some organizations' corporate security policies and
you should be careful when you use DTM in a secure production environment.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>For acceptable performance of
  this preview version of DTM, we highly recommend that you limit the
  number of database results that are returned in any query to no more than
  100. Queries can be jobs, job results, machine pools, etc.</P>&nbsp;<p>


<P><FONT face="Verdana, Arial, Helvetica" size=2><b>NDISTest Job Must be Scheduled Alone</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The following NDISTest DTM jobs cannot be scheduled with other jobs:
<ol>
<li>Modem – NDISTest 6.0 (Interactive)
<li>Modem – NDISTest 6.0 (Non-Interactive)
<li>Modem – NDISTest 6.0 (Power Management)
<li>Irda – NDISTest 6.0
<li>WLAN – NDISTest 6.5
<li>ISDN – NDISTest 6.0
<li>Light Weight Filter – NDISTest 6.5
<li>Ethernet – NDISTest 6.0
<li>Ethernet – NDISTest 6.5
</ol>
</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>In the “Device Console”, before you click “Schedule Jobs” to launch one of the NDISTest DTM jobs, please make sure the NDIStest job is the only job in the selected job list. Failing to do this may cause the job to stalk in the “Scheduler” status forever and never get chance to run.</font></P>&nbsp;<p>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Jobs Fail if Managed WTTlog Assemblies are Unavailable on W2K3 or XP Machines</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>WDK jobs that require the managed WTTLog assemblies will fail on Windows Server 2003 or Windows XP, if the DTM Client was installed on the system without the .NET Framework 2.0.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Perform any of the following:<br>
<ol>
<li>Install .NET Framework 2.0 via Windows Update before installing the DTM Client
<li>Update the DTM Client installation by running setup.exe once again with /update
</ol>
</font></p><p>
<br>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>MCQ Config Jobs Are Incorrectly scheduled by Smart Scheduler</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>While attempting to run certain tabs (D3D and DXVA currently), there is a job ID called Create Dimension Display_DriverModel which runs on it's own (ie, not scheduled), and the job causes the clients to enter debug mode. If you reset the client, the scheduler tries to rerun this job and sends the client back into debug mode prohibiting content coverage.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Delete Jobs under the following nodes: 
	<ul>
	<li> $\System\Gatherer\DISPLAY_BLOCK
	<li> $\System\Gatherer\DRIVER_BLOCK
	<li> $\System\Gatherer\DEVNODE_BLOCK
	</ul>
</font></P>&nbsp;<p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Manual Display Jobs Sent To Random Machines</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>At this time the customer scheduler for Display does not have a method to send all the manual jobs to one machine. Therefore, this causes problems if the machine pool is large since the test will be given to anyone on the system.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>None at this time.</font></P>&nbsp;<p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Removing Jobs From the Queue In A Display Submission</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Currently during a display submission, when a user adds a selection of tests and then decides to remove any of those tests, the display scheduler has difficulty processing.  The result is the constraints/parameters applied to jobs quickly get out of sync.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The preferred method of removing that test from the queue is to close device console and reopen it.</font></P>&nbsp;<p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Non-Discrete Display Chipsets Are Receiving Processor Specific Jobs</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Non-discrete display chipsets do not have any diversity requirements, but the current display scheduler doesn't treat this situation correctly.  Therefore, jobs may be idle in the scheduling pipline waiting for constraints to be met that are difficult to satisfy.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>When working with non-discrete chipsets, cancel the jobs that are waiting for processor specific constraints to be met.</font></P>&nbsp;<p>

<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Tests Failing To Copy Files</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The Run First jobs are now automaticaly set up during client install, but there are some jobs that are not setup correctly which could fail on the copy task with the error: “Failed to Logon User <controller>\DTMShareUser”.</font></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround:</b></font></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2></font></P>&nbsp;<p>



<P><FONT face="Verdana, Arial, Helvetica" size=2><b>WTT\OSSKU Dimension Will Expose Vista Pro as Tablet PC</b></p>
<P><FONT face="Verdana, Arial, Helvetica" size=2>If you create jobs with dimensions set for WTT\OS = Vista & WTT\OSSKU =  PRO, the jobs will never execute
because DTM exposes the Windows Vista professional version as Tablet PC. (WTT\OSSKU = TabletPC)</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2><b>Workaround: </b>Set WTT\OSSKU Dimension = TabletPC for
Windows Vista professional versions.</font></p>&nbsp;<p></font>
</ul>

<P><FONT face="Verdana, Arial, Helvetica" size=2>The NDIS single card job
  requires a media access control (MAC) address. This job will fail to run correctly if
you do not specify the MAC address
  in the <b>Parameters</b> tab and if you do not select the target machine at schedule time. When scheduling this job, insert the MAC
  address of the test card in the <b>Parameter</b> tab and select the associated
  machine by using the check box on the <b>Machines</b> tab.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The DPE job requires a test
  driver. Before scheduling this job, you must choose your test driver. Insert
  the driver name on the <b>Parameters</b> tab and then schedule the job.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>All DCT jobs currently
  require that the Microsoft DirectX 9.0 Software Development Kit (SDK) be
  preinstalled. Install the DirectX 9.0 SDK from
<A
  href="http://msdn.microsoft.com/directx/sdk/">http://msdn.microsoft.com/directx/sdk/</A>
before you run the DCT jobs.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The Photo Print job requires
  a printer to be attached to the target machine. Attach a printer to the target
  machine before scheduling this job.</P>
</ul>


<br>


<!----------------------DTM System Tests-------Drank--------------------->




<!----------------------Run Time Notes---------------------------->
<A name=run></A>
<P><B><FONT face="Verdana, Arial, Helvetica"><H4>Run Time Notes</H4></B>
<ul>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The DTM client
  does not work on client computers where the logged-on user does not have access
  rights to the DTM client. The DTM client will not work on computers where client
  is installed but the logged-on user does not have administrator access rights to
  the DTM controller. It will not display any warning or error messages.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Non-English user names are
  automatically converted to question marks.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>The DTM controller
  setup does not create a machine pool for default testing, so you must create one
  manually.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>A single machine cannot
  function as the controller, Studio, and client.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>Some computer attributes will
  not display after the initial client setup is run. In this situation, the system inventory is not
  properly transferred from the DTM client computer to the DTM controller
computer on the initial client setup. To address this issue,
  run the <b>net stop wttsvc</b> command and then run <b>net start wttsvc</b>
command at a command prompt on the computer under
  test.</P>
<P>You cannot supply the " (double
  quote character) as a value for a parameter. This character will cause problems for
  command-line arguments because any values that contain spaces must be enclosed
  in double quotes.</P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>A job will not be imported
  into a database if it is already present in the database. No error or warning
  messages will be displayed if this situation occurs.</P>

<P>The computer can get into a running state and not go back into the &quot;Ready&quot; state. If this
situation occurs, do the following:
  <ol>
	<LI>At a command prompt on the computer under test (that is, the client),
	type <b>net stop wttsvc</b>.<LI>Delete <i>%systemdrive%</i>\WTT\JobsWorkingDir\JobRuns from the
	computer under
    test.
	<LI>From DTM Studio, click <b>My Assets</b>, click <b>Edit Machine Details</b>, and change
    the computer under test state from &quot;Running&quot; to &quot;Reset&quot;.<LI>At a command prompt on the
	computer under test, type <b>net start wttsvc</b>. </LI>
</ol>
<P></P>
<P><FONT face="Verdana, Arial, Helvetica" size=2>There is no convenient way
  to clean out the jobs list in the Job Monitor Window. Instead, you can
  delete the job (which automatically deletes the job results), or you can filter the results.
</ul>




</UL>
<!--br>


</ul>

</ul>

<div class=MsoNormal align=center style='text-align:center'><span
style='font-size:10.0pt;font-family:Verdana'>

<hr size=2 width="100%" align=center>

</span></div>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Verdana'>Copyright
© 2001-2006 Microsoft Corporation. All rights reserved. </span></p>



</div>

</body>

</html>
